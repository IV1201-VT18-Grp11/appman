@import helper._
@import views.Page

@(form: Form[JobController.ApplyForm], job: Job, possibleCompetences: Seq[Competence])(implicit messages: MessagesProvider, req: RequestHeader)

@main("Apply", Page.Other) {

    @helper.form(routes.JobController.doApplyForJob(job.id), 'class -> "form-signin") {
        @helper.CSRF.formField
        <fieldset>
            <h1 class="h3 mb-3 font-weight-normal">Apply to be a @job.name!</h1>
            @helper.textarea(form("description"), 'class -> "form-control", '_label -> "Why are you a good fit for this job?")
            @helper.repeat(form("competences")) { competence =>
                @helper.select(competence("id"), possibleCompetences.map(competence => (competence.id.raw.toString, competence.name)), '_label -> "Competence")
                @helper.inputText(competence("experienceYears"), '_label -> "Years of experience")
            }
            @helper.repeat(form("availabilities")) { availability =>
                @helper.inputDate(availability("from"),'_label -> "Availability begins at")
                @helper.inputDate(availability("to"), '_label -> "until")
            }
            <button id="apply" class="btn btn-lg btn-primary btn-block" type="submit">Apply</button>
        </fieldset>
    }
}
